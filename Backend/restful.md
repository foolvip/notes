# restful架构
## 学习链接
https://blog.jimmylv.info/2015-11-11-what-is-really-rest/  
http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html    
https://juejin.im/post/57d0db282e958a0054496596#authentication  
- Resource：资源，即数据。比如 newsfeed，friends，order 等；
- Representational：某种表现形式，比如用 JSON，XML，JPEG 等；
- State Transfer：状态变化。通过 HTTP 动词实现。  

### rest是什么？
万维网软件架构风格   
restful(Representational State Transfer): 表现层状态转化,俗来讲就是：资源在网络中以某种表现形式进行状态转移。 
### 6个限制（精髓，面试中经常考到）
1. 客户端-服务器（Client-Server）  
  关注点分离：即是，服务端专注数据存储，提升了简单性；前端专注用户界面，提升了可移植性。
2. 无状态（Stateless）
  所有用户会话信息都保存在客户端，每次请求必须包括所有信息，不能依赖上下文信息。（比如说分页，请求下一页，请求接口的时候明确说明需要获取第几页的信息内容）   
  好处：服务端不用保存会话信息，提升了简单性（服务端少了很多代码）、可靠性（软件的稳定程度以及从一次故障中恢复正常的能力）、可见性（软件工程中模块、接口的透明性）；   
3. 缓存
  所有服务端响应都要被标记为可缓存或不可缓存：静态资源（js、css等）需要缓存，接口不能缓存；  
  缓存的作用：减少前后端交互，提升了性能   
4. 统一接口（Uniform Interface）
  接口设计尽可能统一通用（所有的接口设计遵循同一套规范），提升了简单性、可见性；    
  接口与实现解耦，是前后端可以独立开发迭代   
5. 分层系统（Layered System）    
   每层只知道相邻的一层，后面隐藏的就不知道了；客户端不知道是和代理还是真实服务器通信；其他层：安全层、负载均衡、缓存层等；   
6. 按需代码（Code-On-Demand可选）   
  客户端可以下载运行服务端传来的代码（比如JS：eval运行），简化了客户端；   
### 统一接口的限制（上面第4条的子限制）
   1. 资源的标识
   - 资源是任何可以命名的事物，比如用户、评论等
   - 每个资源可以通过URI被唯一地标识（https://api.github.com/users）
  2. 通过表述来操作资源
   - 表述就是Representation,比如JSON、XML等
   - 客户端不能直接操作（比如SQL）服务端资源，客户端应该通过表述（比如JSON）来操作资源；即是通过JSON格式数据发送给服务端，更新数据等操作。
  3. 自描述消息
   - 每个消息（请求或响应）必须提供足够的信息（媒体类型：application/json、application/xml;Http方法：GET、POST、DELETE；是否缓存：Catche-Control）让接受者理解。
  4. 超媒体作为应用状态引擎
    超媒体：带文字的链接；应用状态：一个网页；引擎：驱动、跳转；点击链接跳转到另一个网页；

### 什么是Restful API?
即是：符合rest架构风格的API   
基本的UIRI，如https://api.github.com/users     
标准HTTP方法，如GET，POST，PUT，PATCH，DELETE    
传输的数据媒体类型，如JSON，XML； 

### 请求设计规范
- URI使用名次，尽量用复数，如/users
- URI使用嵌套表示关联关系，如/users/12/repos/5
- 使用正确的HTTP方法，如GET/POST/PUT/DELETE；
- 不符合CRUD的情况：POST/action/子资源
 
#### 响应设计规范
查询、分页、过滤字段、状态码、错误处理；
#### 安全
https、鉴权、限流（防止多次连续请求）；



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
